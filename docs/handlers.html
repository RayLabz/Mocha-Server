<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <link rel="shortcut icon" type="image/png" href="images/mocha.png"/>
    <meta name="theme-color" content="#795548"/>
    <title>Mocha - RayLabz</title>

    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <style>
        h3 {
            text-shadow: 1px 1px 2px grey;
        }
    </style>
</head>
<body>

<!--<nav>-->
<!--    <div class="nav-wrapper orange darken-4"></div>-->
<!--</nav>-->

<main>

    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <br>
            <h1 class="header center brown-text">Mocha</h1>
            <br>
            <div class="row center">
                <img class="responsive-img" src="images/mocha.png" width="200"/>
            </div>
            <div class="row center">
                <h4 class="header col s12 light">A lightweight, multi-threaded TCP/UDP  library for Java</h4>
            </div>

            <hr/>

            <div class="row">
                <div class="center"><h3>Handlers</h3></div>
                <h4>Summary</h4>
                <ul class="browser-default">
                    <li>Handlers are server components that listen for incoming messages and do something when a message is received.</li>
                    <li>Each handler runs on a separate thread. Handlers can thus run in parallel with each other so that a server can process
                        requests coming from many ports at the same time while also being under the supervision of the main server thread.</li>
                    <li>Each handler is assigned to a particular port and you must define what will happen once a message/request is received through that port.</li>
                </ul>

                <p>
                    <a href="serverGuide.html#handlers">How to add handlers in Mocha</a>
                </p>

                <h4>Architecture</h4>

                <p>The diagram below demonstrates the high-level architecture of Mocha.</p>

                <div class="center">
                    <img class="responsive-img" src="images/mocha-handlers.png" />
                </div>

                <p>
                    A server works by managing a set of UDPConnections and a set of TCPHandlers. Because of the nature of the
                    two protocols, there are differences in the way each of these is managed.
                </p>

                <div class="col s12 l6">
                    <h5>UDP</h5>

                    <p>
                        Mocha implements functionality that allows a server to serve using the UDP protocol.
                        The server manages UDPConnections by running each of them on a separate thread. Each UDPConnection
                        listens to incoming requests on a specific UDP port (e.g. 1111). A UDPConnection manages these
                        requests <u>for all clients connected to that port</u>. This is because in UDP, there is no persistent
                        channel established between the client and the server. Each message that is sent is completely independent
                        (<b>connection-less</b>) and its arrival and arrival time cannot be guaranteed.
                    </p>
                </div>

                <div class="col s12 l6">
                    <h5>TCP</h5>

                    <p>
                        Mocha enables communication over TCP by managing a set of TCPHandlers. A TCPHandler acts as a connection manager
                        for a specific TCP port (e.g. 2222). Therefore, there can be multiple TCPHandlers, each of which is responsible
                        for a different port. To manage client connections, each TCPHandler in turn manages a set of TCPConnections,
                        which establish a direct connection to a specific client. This is similar to what a UDPConnection does for UDP,
                        but it works by first establishing a persistent channel between the client and server (<b>connection-oriented</b>).
                    </p>
                </div>

            </div>

            <p>
                We are open to suggestions and comments on this architecture.
                Feel free to <a href="mailto:raylabzg@gmail.com?subject=Mocha"><u>contact us</u></a> to make Mocha better!
            </p>

            <p>
                <a href="index.html"><u>Go back</u></a>
            </p>

            <br/><br/>
        </div>
    </div>

</main>

<footer class="page-footer brown">
    <div class="container">
        <div class="center light">Made by <a class="white-text" href="http://www.RayLabz.com">RayLabz</a></div>
        <br/>
    </div>
</footer>


<!--  Scripts-->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="js/materialize.js"></script>
<script src="js/init.js"></script>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

</body>
</html>
